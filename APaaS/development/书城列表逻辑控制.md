# 书城列表逻辑控制

## 加入书架

### 业务逻辑

- 点击按钮时先获取该行对应的 图书管理表 的 用户书架(加入书架的用户) 字段，将 当前用户ID 加入其中后再给 用户书架 赋值，并向 我的书架表 新增一条数据。

### 开始

- 进入逻辑控制并点击新增。

### 操作变量—定义用户书架字段和当前用户ID

-  

### 操作变量—用js将当前用户ID加入用户书架

-  

### 服务编排—操作数据表更新数据

- 业务逻辑

	- 更新 图书管理表 的 用户书架 字段，向 我的书架表 新增一条数据。

- 开始

	-  

- 变量计算—定义需要用到的变量

	-  

- 数据操作—修改图书管理表的匹配项

	-  

- 数据操作—我的书架表新增数据

	-  

- 结束—无需输出字段

### 通知提示—提示用户操作结果

-  

### 刷新列表

### 结束

## 移出书架

### 业务逻辑

- 跟加入书架的逻辑相反；点击按钮时先获取该行对应的 图书管理表 的 用户书架(加入书架的用户) 字段，将 当前用户ID 删除后再给 用户书架 赋值，并删除 我的书架表 匹配项。

### 开始

- 进入逻辑控制并点击新增。

### 操作变量—定义用户书架字段和当前用户ID

-  

### 操作变量—用js将当前用户ID移出用户书架

-  

### 服务编排—操作数据表更新数据

- 业务逻辑

	- 更新 图书管理表 的 用户书架 字段，删除 我的书架表 的匹配项的数据。

- 开始

	-  

- 变量计算—定义需要用到的变量

	-  

- 数据操作—修改图书管理表的匹配项

	-  

- 数据操作—删除我的书架表的匹配项

	-  

- 结束—无需输出字段

### 通知提示—提示用户操作结果

-  

### 刷新数据

### 结束

